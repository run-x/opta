{
  "$id": "https://app.runx.dev/schemas/gcp-nodepool",
  "type": "object",
  "description": "Creates an additional nodepool for the primary GKE cluster.",
  "properties": {
    "max_nodes": {
      "type": "integer",
      "description": "The maximum number of nodes to be set by the autoscaler in for the default nodegroup.",
      "default": 5
    },
    "min_nodes": {
      "type": "integer",
      "description": "The minimum number of nodes to be set by the autoscaler in for the default nodegroup.",
      "default": 1
    },
    "node_disk_size": {
      "type": "integer",
      "description": "The size of the disk to be attached to each node.",
      "default": 20
    },
    "node_instance_type": {
      "type": "string",
      "description": "The [gcloud machine type](https://cloud.google.com/compute/docs/machine-types) for the nodes.",
      "default": "n2-highcpu-4"
    },
    "gke_channel": {
      "description": "The [gcloud channel](https://cloud.google.com/sdk/channels) to use for the gke command.",
      "enum": ["RAPID", "REGULAR", "STABLE"]
    },
    "preemptible": {
      "type": "boolean",
      "description": "A boolean specifying whether to use [preemptible instances](https://cloud.google.com/compute/docs/instances/preemptible) for the default nodegroup or not. The preemptible instances will be configured to have the max price equal to the on-demand price (so no danger of overcharging). _WARNING_: By using preemptible instances you must accept the real risk of frequent abrupt node terminations and possibly (although extremely rarely) even full blackouts (all nodes die). The former is a small risk as containers of Opta services will be automatically restarted on surviving nodes. So just make sure to specify a minimum of more than 1 containers -- Opta by default attempts to spread them out amongst many nodes.",
      "default": false
    }
  }
}
